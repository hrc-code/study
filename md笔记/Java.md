# Java

## 设计模式

- 创建者模式
  - 单例模式
    - 饿汉式（Runtime类使用）
      - 加载类时创建对象
    - 懒汉式
      - 使用`getInstance()`时创建对象

## String

- 构造方法
  - 编码字节流转换（先编码，再解码）

## 多线程

- 特点
  - 原子性
  - 可见性
  - 有序性

**`注意点`**

- 只用调用start()才能实现多线程的效果，调用run()实现的是和单线程一样的效果。

### 线程类

- Thread

| 方法名                                  | 说明                                                         |
| --------------------------------------- | ------------------------------------------------------------ |
| void start()                            | 让VM调用run())或者call()                                     |
| void setName(String name)               | 设置线程的名称                                               |
| String getName()                        | 返回线程的名称                                               |
| static Thread currentThread()           | 返回当前正在执行的线程                                       |
| static void sleep(long millis)          | 使当前正在执行的线程停留指定的毫秒                           |
| final int getPrioriy()                  | 返回线程的优先级                                             |
| final void setPriority(int newPriority) | 更改线程的优先级（默认优先级为5，优先级范围:1-10）           |
| void setDaemon(boolean on)              | 将此线程标记为守护线程，当运行的线程都是守护线程时，JVM将结束运行 |
|                                         |                                                              |

- FutureTask<返回值类型>

| 方法名  | 说明             |
| ------- | ---------------- |
| V get() | 获取线程的返回值 |

- Object

使用什么对象当作锁，那就必须使用这个对象去调用等待与唤醒方法

| 方法名           | 说明                   |
| ---------------- | ---------------------- |
| void wait()      | 让线程处于等待状态     |
| void notify()    | 唤醒一个线程           |
| void notifyAll() | 唤醒全部处于等待的线程 |

### 线程接口

- Runnable

| 方法名     | 说明                   |
| ---------- | ---------------------- |
| void run() | 开启线程之后执行该方法 |

- Callable
| 方法名   | 说明                                  |
| -------- | ------------------------------------- |
| V call() | 开启线程之后执行该方法,并且具有返回值 |

### 阻塞队列

- BlockingQueue

**ArrayBlockingQueue和LinkedBlockingQueue**

| 方法名             | 说明                                           |
| ------------------ | ---------------------------------------------- |
| void put(Object e) | 将元素添加阻塞队列中，队列满了，则处于等待状态 |
| V take()           | 取出队列中第一个元素，若没有则处于等待状态     |

### 锁的实现对象

- ReentrantLock

| 方法名        | 说明 |
| ------------- | ---- |
| void lock()   | 加锁 |
| void unlock() | 解锁 |

### 解决多线程数据安全问题 （synchronized)

- 同步代码块---锁对象为任意对象

```java
synchronized(任意对象){
	处理共享数据的代码
}
```

- 同步方法
static方法--锁对象为类  成员方法---锁对象为调用者
 ```java
修饰符 synchronized 返回值类型 方法名（方法参数）{
			方法体
}//锁对象为 this
#静态同步方法
    修饰符 static synchronized 返回值类型 方法名 （方法参数）{
    		方法体
}//锁对象为 类名.class
 ```

### 死锁

-  是指两个或着多个线程相互持有对方所需要的资源，导致这些线程处于等待状态，无法执行

