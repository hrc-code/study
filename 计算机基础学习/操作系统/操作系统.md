# æ“ä½œç³»ç»Ÿ

- å®šä¹‰

ä¸€ç§ç®¡ç†è½¯ä»¶èµ„æºå’Œç¡¬ä»¶èµ„æºçš„ç³»ç»Ÿè½¯ä»¶

- åŠŸèƒ½
  - èµ„æºç®¡ç†
    - å¤„ç†æœºç®¡ç†
  - å­˜å‚¨å™¨ç®¡ç†
    - æ–‡ä»¶ç®¡ç†
    - è®¾å¤‡ç®¡ç†
  - æä¾›åŠŸèƒ½æ¥å£ï¼ˆå‘½ä»¤æ¥å£---cmdã€ç¨‹åºæ¥å£--ç³»ç»Ÿè°ƒç”¨ï¼‰
  
- ç‰¹å¾
  - å¹¶å‘
  - å…±äº«
  - è™šæ‹Ÿ
  - å¼‚æ­¥

## è¿›ç¨‹ä¸çº¿ç¨‹

- è¿›ç¨‹æ§åˆ¶
  - æ¦‚å¿µï¼šå°†è¿›ç¨‹çš„çŠ¶æ€è¿›è¡Œè½¬æ¢
  - è¿›ç¨‹çŠ¶æ€
    - åˆ›å»ºæ€
    - å°±ç»ªæ€
    - è¿è¡Œæ€
    - é˜»å¡æ€
    - ç»ˆæ­¢æ€
  -	å®ç°åŸç†ï¼šä½¿ç”¨åŸè¯­å®Œæˆè¿›ç¨‹çŠ¶æ€çš„è½¬æ¢
- è¿›ç¨‹é€šä¿¡
  - å…±äº«å­˜å‚¨
    - åŸºäºæ•°æ®ç»“æ„å…±äº«å­˜å‚¨
    - åŸºäºå­˜å‚¨åŒºå…±äº«å­˜å‚¨
  - ç®¡é“é€šä¿¡
  - æ¶ˆæ¯ä¼ é€’
    - ç›´æ¥ä¼ é€’
    - é—´æ¥ä¼ é€’
- çº¿ç¨‹
  - æ¦‚å¿µï¼šè½»é‡çº§è¿›ç¨‹
  - ç‰¹æ€§
    - åŒä¸€è¿›ç¨‹çš„çº¿ç¨‹èµ„æºå…±äº«
    - å…·æœ‰å¹¶å‘æ€§
    - CPUè°ƒåº¦çš„åŸºæœ¬å•ä½
  - ç±»å‹
    - ç”¨æˆ·çº§çº¿ç¨‹
    - å†…æ ¸çº§çº¿ç¨‹
  - å¤šçº¿ç¨‹æ¨¡å‹
    - ä¸€å¯¹ä¸€
      - ä¼˜ç‚¹ï¼šå¹¶å‘èƒ½åŠ›å¼º
      - ç¼ºç‚¹ï¼šçº¿ç¨‹ç®¡ç†å¼€é”€å¤§
    - å¤šå¯¹ä¸€
      - ä¼˜ç‚¹ï¼šçº¿ç¨‹ç®¡ç†å¼€é”€å°
      - ç¼ºç‚¹ï¼šå¹¶å‘èƒ½åŠ›å¼±
    - å¤šå¯¹å¤š
      - å¹¶å‘èƒ½åŠ›ä¸€èˆ¬ï¼Œçº¿ç¨‹ç®¡ç†å¼€é”€ä¸€èˆ¬

#### è¿›ç¨‹è°ƒåº¦

![hrc_2023-07-12_15-23-32](æ“ä½œç³»ç»Ÿ/hrc_2023-07-12_15-23-32-1689148129049.png)

- è¿›ç¨‹è°ƒåº¦æ—¶æœº![hrc_2023-07-12_15-10-14](æ“ä½œç³»ç»Ÿ/hrc_2023-07-12_15-10-14.png)
     - å¯ä»¥è¿›ç¨‹è°ƒåº¦
        - ä¸»åŠ¨æ”¾å¼ƒ
          - è¿›ç¨‹æ­£å¸¸ç»ˆæ­¢
          - è¿è¡Œè¿‡ç¨‹ä¸­æ–¹å¼å¼‚å¸¸è€Œç»ˆæ­¢
          - é˜»å¡ï¼ˆç­‰å¾…I/O)
        - è¢«åŠ¨æ”¾å¼ƒ
          - åˆ†ç»™è¿›ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œ
          - æœ‰æ›´ç´§æ€¥çš„äº‹æƒ…éœ€è¦å¤„ç†(å¦‚ I/O ä¸­æ–­)
          - æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹è¿›å…¥å°±ç»ªé˜Ÿåˆ—
            - ä¸èƒ½è¿›è¡Œè¿›ç¨‹è°ƒåº¦
        - åœ¨å¤„ç†ä¸­æ–­è¿‡ç¨‹ä¸­
        - è¿›ç¨‹åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸ç¨‹åºä¸´ç•ŒåŒºä¸­
        - åŸå­æ“ä½œè¿‡ç¨‹ä¸­(åŸè¯­)
- è¿›ç¨‹åˆ‡æ¢è¿‡ç¨‹
  - å¯¹åŸæ¥è¿è¡Œè¿›ç¨‹å„ç§æ•°æ®çš„ä¿å­˜
  - å¯¹æ–°çš„è¿›ç¨‹å„ç§æ•°æ®çš„æ¢å¤
  - è¿›ç¨‹è°ƒåº¦ã€åˆ‡æ¢æ˜¯æœ‰ä»£ä»·çš„ï¼Œå¹¶ä¸æ˜¯è°ƒåº¦è¶Šé¢‘ç¹ï¼Œå¹¶å‘åº¦å°±è¶Šé«˜
- è¿›ç¨‹è°ƒåº¦æ–¹å¼
  - éå‰¥å¤ºè°ƒåº¦æ–¹å¼(éæŠ¢å å¼)
    - åªèƒ½ç”±å½“å‰è¿è¡Œçš„è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒCPU
    - å®ç°ç®€å•ï¼Œç³»ç»Ÿå¼€é”€å°ä½†æ˜¯æ— æ³•åŠæ—¶å¤„ç†ç´§æ€¥ä»»åŠ¡ï¼Œé€‚åˆäºæ—©æœŸçš„æ‰¹å¤„ç†ç³»ç»Ÿ
  - å‰¥å¤ºè°ƒåº¦æ–¹å¼(æŠ¢å å¼)
    - å¯ç”±æ“ä½œç³»ç»Ÿå‰¥å¤ºå½“å‰è¿›ç¨‹çš„CPUä½¿ç”¨æƒ
    - å¯ä»¥ä¼˜å…ˆå¤„ç†æ›´ç´§æ€¥çš„è¿›ç¨‹ï¼Œä¹Ÿå¯ä»¥å®ç°è®©å„è¿›ç¨‹æŒ‰ç…§æ—¶é—´ç‰‡è½®æµæ‰§è¡Œçš„åŠŸèƒ½(é€šè¿‡æ—¶é’Ÿä¸­æ–­)ï¼Œé€‚åˆåˆ†æ—¶æ“ä½œç³»ç»Ÿã€å®æ—¶æ“ä½œç³»ç»Ÿ

##### è°ƒåº¦ç®—æ³•è¯„ä¼°

- CPUåˆ©ç”¨ç‡
- ç³»ç»Ÿååé‡
- å‘¨è½¬æ—¶é—´
- ç­‰å¾…æ—¶é—´
- å“åº”æ—¶é—´

![hrc_2023-07-13_16-15-06](æ“ä½œç³»ç»Ÿ/hrc_2023-07-13_16-15-06.png)

-----------

#### è°ƒåº¦ç®—æ³•

> - å…ˆæ¥å…ˆæœåŠ¡ç®—æ³•(FCFS)
> - çŸ­ä½œä¸šä¼˜å…ˆç®—æ³•(SJF)
> - é«˜å“åº”æ¯”ä¼˜å…ˆ(HRRN)
>
> ![hrc_2023-07-14_10-56-24](æ“ä½œç³»ç»Ÿ/hrc_2023-07-14_10-56-24.png)
>
> ![hrc_2023-07-14_11-07-04](æ“ä½œç³»ç»Ÿ/hrc_2023-07-14_11-07-04.png)
>
> ![hrc_2023-07-14_11-21-06](æ“ä½œç³»ç»Ÿ/hrc_2023-07-14_11-21-06.png)

-----

#### ç¡¬ä»¶å®ç°è¿›ç¨‹äº’æ–¥çš„æ–¹æ³•

> - å¼€/å…³ä¸­æ–­æŒ‡ä»¤
> - TestAndSetæŒ‡ä»¤
> - SwapæŒ‡ä»¤
>
> ![hrc_2023-07-15_17-05-04](æ“ä½œç³»ç»Ÿ/hrc_2023-07-15_17-05-04.png)

#### ä¿¡å·é‡æœºåˆ¶

---

> wait(S) åŸè¯­---Pæ“ä½œ å’Œ signal(S) åŸè¯­---Væ“ä½œï¼Œå¯ä»¥ç†è§£æˆæˆ‘ä»¬è‡ªå·±å†™çš„å‡½æ•°

- æ•´å½¢ä¿¡å·é‡

> ä¸èƒ½æ»¡è¶³è®©æƒç­‰å¾…åŸåˆ™ï¼Œå­˜åœ¨while

```c
void wait(int S) {			void signal(int S) { 
    while (S<=0);				S = S + 1;
    S = S - 1;				}
}							
```

- è®°å½•å‹ä¿¡å·é‡

> æ»¡è¶³è®©æƒç­‰å¾…åŸåˆ™ï¼Œä½¿ç”¨ if

```c
typedef struct {					void wait(semaphore S) {      void signal(semaphore S) {
    int value;å‰©ä½™èµ„æºæ•°é‡				S.value--;						S.value++;
    struct process *L;ç­‰å¾…é˜Ÿåˆ—	           if (S.value<0) {				if (S.value>=0) {
} semaphore;						     block(S.L);					wakeup(S.L);
    								}							}
               					  }								}
```

![hrc_2023-07-16_21-26-21](æ“ä½œç³»ç»Ÿ/hrc_2023-07-16_21-26-21.png)

- å®ç°è¿›ç¨‹äº’æ–¥

> äº’æ–¥é—®é¢˜ä¿¡å·é‡åˆå§‹å€¼è®¾ä¸º1ï¼Œä¸´ç•Œèµ„æºåªæœ‰ä¸€ä¸ªã€‚

- å®ç°è¿›ç¨‹åŒæ­¥

>  åŒæ­¥é—®é¢˜ä¿¡å·é‡åˆå§‹å€¼ä¸º0

- å®ç°è¿›ç¨‹çš„å‰é©±å…³ç³»

> æœ¬è´¨æ˜¯å¤šçº§åŒæ­¥é—®é¢˜ï¼ŒPæ“ä½œå¯ä»¥çœ‹æˆä¸€æŠŠğŸ”’ï¼ŒVæ“ä½œçœ‹æˆğŸ”‘ï¼Œæ‹¿åˆ°ğŸ”‘æ‰å¯ä»¥è§£ğŸ”’

![image-20230717205433265](æ“ä½œç³»ç»Ÿ/image-20230717205433265.png)

- æ¶ˆè´¹è€…ä¸ç”Ÿäº§è€…é—®é¢˜

> è¿™æ˜¯ä¸€ä¸ªè¿›ç¨‹åŒæ­¥ä¸äº’æ–¥çš„ç»¼åˆé—®é¢˜ã€‚

![hrc_2023-07-18_16-54-42](æ“ä½œç³»ç»Ÿ/hrc_2023-07-18_16-54-42.png)

ç»†èŠ‚

> **å®ç°äº’æ–¥çš„Pæ“ä½œä¸€å®šè¦åœ¨å®ç°Pæ“ä½œä¹‹å**ï¼ŒVæ“ä½œä¸ä¼šå¯¼è‡´è¿›ç¨‹å µå¡ï¼Œå› æ­¤ä¸¤ä¸ªVæ“ä½œé¡ºåºå¯ä»¥äº¤æ¢ã€‚

![hrc_2023-07-18_16-50-40](æ“ä½œç³»ç»Ÿ/hrc_2023-07-18_16-50-40.png)

#### æ­»é”

> è¿›ç¨‹ä¹‹é—´ç›¸äº’å æœ‰å¯¹æ–¹æ‰€éœ€è¦çš„èµ„æºã€‚

é¢„é˜²æ­»é”

- ç ´åäº’æ–¥æ¡ä»¶
- ç ´åä¸å‰¥å¤ºæ¡ä»¶
- ç ´åè¯·æ±‚å’Œä¿æŒæ¡ä»¶
- ç ´åå¾ªç¯ç­‰å¾…æ¡ä»¶

![Snipaste_2023-07-20_14-10-56](æ“ä½œç³»ç»Ÿ/Snipaste_2023-07-20_14-10-56.png)